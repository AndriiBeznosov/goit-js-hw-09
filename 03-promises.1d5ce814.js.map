{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,OAAQC,SAASC,cAAc,SAC/BC,MAAOF,SAASC,cAAc,kBAC9BE,KAAMH,SAASC,cAAc,iBAC7BG,MAAOJ,SAASC,cAAc,mBAC9BI,UAAWL,SAASC,cAAc,iBAClCK,aAAcN,SAASC,cAAc,oBAEvCH,EAAKC,OAAOQ,iBAAiB,SAkE7B,SAAkBC,GAChBC,EAAOD,EAAEE,OAAOC,MAAQH,EAAEE,OAAOE,SAlEnCd,EAAKC,OAAOQ,iBAAiB,UAS7B,SAA4BC,GAC1BA,EAAEK,iBACFC,QAAQC,IAAIN,GACZX,EAAKO,UAAUW,UAAW,EAC1BlB,EAAKQ,aAAaU,UAAW,EAc7BC,YAAW,WACJnB,EAAKO,UAAUW,WAClBlB,EAAKQ,aAAaU,UAAW,GAE/BE,EAAUC,OAAOV,EAAOP,OACxBkB,EAAaC,aAAY,WAEvB,GADAH,GAAWC,OAAOV,EAAON,MACrBmB,IAAmBH,OAAOV,EAAOc,QAEnC,OAkBeC,EAnBfF,GAAkB,EAmBOpB,EAlBYgB,EAmBpC,IAAIO,SAAQ,SAACC,EAASC,GACLC,KAAKC,SAAW,GAEpCH,EAAQ,CAAEF,WAAUtB,UAEpByB,EAAO,CAAEH,WAAUtB,cAvBd4B,MAAK,SAAAC,G,IAAGP,EAAQO,EAARP,SAAUtB,EAAK6B,EAAL7B,MACjBN,EAAAoC,OAAOC,QAAQ,uBAAwCC,OAAfV,EAAS,QAAYU,OAANhC,EAAM,UAE9DiC,OAAM,SAAAJ,G,IAAGP,EAAQO,EAARP,SAAUtB,EAAK6B,EAAL7B,MAClBN,EAAAoC,OAAOI,QAAQ,sBAAqCF,OAAfV,EAAS,QAAYU,OAANhC,EAAM,UAatE,IAAuBsB,EAAUtB,EAT3BmC,cAAcjB,GACdtB,EAAKO,UAAUW,UAAW,EAC1BlB,EAAKQ,aAAaU,UAAW,EAC7BM,EAAiB,EACjBJ,EAAUC,OAAOV,EAAOP,SACvBO,EAAON,QACTM,EAAOP,UAlDZJ,EAAKQ,aAAaC,iBAAiB,SAgBnC,WACE8B,cAAcjB,GACdtB,EAAKO,UAAUW,UAAW,EAC1BlB,EAAKQ,aAAaU,UAAW,EAC7BM,EAAiB,EACjBJ,EAAUC,OAAOV,EAAOP,OACxBY,QAAQC,IAAIN,MApBd,IAAIA,EAAS,GACTa,EAAiB,EACjBF,EAAa,KACbF,EAAU,EACdpB,EAAKQ,aAAaU,UAAW,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n  onForm: document.querySelector('.form'),\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amout: document.querySelector('[name=\"amount\"]'),\n  submitBtn: document.querySelector('.btn-promises'),\n  btnResetStop: document.querySelector('.btn-stop-reset'),\n};\nrefs.onForm.addEventListener('input', getInput);\nrefs.onForm.addEventListener('submit', startCreatePromise);\nrefs.btnResetStop.addEventListener('click', stopResetForm);\n\nlet onForm = {};\nlet numberPosition = 0;\nlet intervalId = null;\nlet onDeley = 0;\nrefs.btnResetStop.disabled = true;\n\nfunction startCreatePromise(e) {\n  e.preventDefault();\n  console.log(onForm);\n  refs.submitBtn.disabled = true;\n  refs.btnResetStop.disabled = false;\n\n  onSetInterval();\n}\nfunction stopResetForm() {\n  clearInterval(intervalId);\n  refs.submitBtn.disabled = false;\n  refs.btnResetStop.disabled = true;\n  numberPosition = 0;\n  onDeley = Number(onForm.delay);\n  console.log(onForm);\n}\n\nfunction onSetInterval() {\n  setTimeout(() => {\n    if (!refs.submitBtn.disabled) {\n      refs.btnResetStop.disabled = true;\n    }\n    onDeley = Number(onForm.delay);\n    intervalId = setInterval(() => {\n      onDeley += Number(onForm.step);\n      if (numberPosition !== Number(onForm.amount)) {\n        numberPosition += 1;\n        return createPromise(numberPosition, onDeley)\n          .then(({ position, delay }) => {\n            Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n          })\n          .catch(({ position, delay }) => {\n            Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n          });\n      }\n\n      clearInterval(intervalId);\n      refs.submitBtn.disabled = false;\n      refs.btnResetStop.disabled = true;\n      numberPosition = 0;\n      onDeley = Number(onForm.delay);\n    }, onForm.step);\n  }, onForm.delay);\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n}\n\nfunction getInput(e) {\n  onForm[e.target.name] = e.target.value;\n}\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$refs","onForm","document","querySelector","delay","step","amout","submitBtn","btnResetStop","addEventListener","e","$ce04d3a99e08e73b$var$onForm","target","name","value","preventDefault","console","log","disabled","setTimeout","$ce04d3a99e08e73b$var$onDeley","Number","$ce04d3a99e08e73b$var$intervalId","setInterval","$ce04d3a99e08e73b$var$numberPosition","amount","position","Promise","resolve","reject","Math","random","then","param","Notify","success","concat","catch","failure","clearInterval"],"version":3,"file":"03-promises.1d5ce814.js.map"}